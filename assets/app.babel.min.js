"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}var SomeClass=function(){function t(e){_classCallCheck(this,t),this.form=e,this.msg=document.getElementById("msg"),this.token="token",this.api="https://reqres.in/api/register",this.init()}return _createClass(t,[{key:"init",value:function(){var o=this;this.form.addEventListener("submit",function(e){e.preventDefault(),o.showMessage("");var t=document.getElementById("login").value,n=document.getElementById("password").value,s=o.validate(t,n);if(!0===s){var a={email:t,password:n};o.ajaxRequest(JSON.stringify(a))}else o.showMessage(s)})}},{key:"validate",value:function(e,t){if(!/\S+@\S+\.\S+/.test(e))return"Login should be a valid email address.";return/[#@$%]/.test(t)?"Password should not contain: #, @, $ or %.":!(t.length<6)||"Password should be at least 6 characters long."}},{key:"ajaxRequest",value:function(e){var t=this,n=new XMLHttpRequest;n.open("POST",this.api,!0),n.setRequestHeader("Content-type","application/json"),n.send(e),n.onreadystatechange=function(){if(4==this.readyState){var e=JSON.parse(this.responseText);200==this.status?t.saveData(e):t.showMessage(e.error)}}}},{key:"showMessage",value:function(e){return this.msg.innerHTML=e}},{key:"saveData",value:function(e){localStorage.setItem(this.token,e.token),this.showMessage("Token saved.")}},{key:"checkToken",value:function(){var e=localStorage.getItem(this.token);return null!==e&&e}}]),t}();document.addEventListener("DOMContentLoaded",function(e){var t=document.getElementById("form");new SomeClass(t)});